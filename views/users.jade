doctype html
html
    head
        title #{title}
        meta(name='user page', content='width=device-width, initial-scale=1.0')
        script.
            function appendDevices() {
                var dataset = !{JSON.stringify(data)}
                var l = dataset.length;

                var deviceList = document.getElementById('devices');

                var i;
                for (i = 0; i < l; i++) { //iterate the dataset by using the for loop
                    let deviceNum = dataset[i].deviceNum;
                    let deviceName = dataset[i].deviceName;

                    let div = document.createElement("div"); //new div tag that should be appended.
                    div.class = 'device';

                    var temperDiv = document.createElement('div')
                    temperDiv.id = 'temperature';

                    let temperature = dataset[i].temperature;

                    let temperImg = document.createElement('img');
                    let temperSpan = document.createElement('span');

                    temperImg.id = 'temperatureImg';
                    temperSpan.id = 'temperatureVal';

                    temperImg.src = '../public/images/if_temperature_354242.svg'
                    temperImg.width = '35';
                    temperImg.height = '35';

                    let deviceNameSpan = document.createElement('span');
                    deviceNameSpan.innerText = deviceName;
                    deviceNameSpan.class = 'deviceName';
                    deviceNameSpan.style.fontSize = '25px';

                    temperSpan.innerText = temperature + ' â„ƒ';
                    temperSpan.style.fontSize = '25px'

                    let button = document.createElement('button');
                    button.type = 'button';
                    button.innerText = 'analyse';
                    button.onclick = function() {
                        redirectToDataPage(deviceNum);
                    };

                    temperDiv.appendChild(deviceNameSpan);
                    temperDiv.appendChild(temperImg);
                    temperDiv.appendChild(temperSpan);
                    temperDiv.appendChild(button);

                    div.appendChild(temperDiv); //append the div tag for the temperature to the div tag for the device info.
                    deviceList.appendChild(div); //add the child node to the div tag who's id is 'devices'.
                }
            }

            function redirectToDataPage(deviceNum) {
                var url = 'https://192.168.219.154:8443/data?deviceNum=' + deviceNum;
                url += '&user=' + document.getElementById('userID').innerText;
                window.location.href = url;
            }

            window.onload = appendDevices; //call the appendDevices function when the page is on load.
    body
        h1 application name
        h2(id='userID') #{user}
        div(class='devices', id='devices')