doctype html
html
    head
        title #{title}
        meta(name='user page', content='width=device-width, initial-scale=1.0')
        link(rel='stylesheet', href='../public/stylesheets/userPage.css')
        script.
            function appendDevices() {
                let dataSet = !{JSON.stringify(data)}
                let l = dataSet.length;

                let deviceList = document.getElementById('devices');

                var i;
                for (i = 0; i < l; i++) { //iterate the data set by using the for loop
                    let deviceNum = dataSet[i].deviceNum;
                    let deviceName = dataSet[i].deviceName;

                    let div = document.createElement("div"); //new div tag that should be appended.
                    div.class = 'device';

                    let temperDiv = document.createElement('div')
                    temperDiv.id = 'temperature';

                    let temperature = dataSet[i].temperature;

                    let temperImg = document.createElement('img');
                    let temperSpan = document.createElement('span');

                    temperImg.id = 'temperatureImg';
                    temperSpan.id = 'temperatureVal';

                    temperImg.src = '../public/images/if_temperature_354242.svg'

                    let deviceNameSpan = document.createElement('span');
                    deviceNameSpan.innerText = deviceName;
                    deviceNameSpan.id = 'deviceName';

                    temperSpan.innerText = temperature + ' â„ƒ';

                    //add the onclick event listener to the temperature div tag.
                    temperDiv.onclick = function() {
                        redirectToDataPage(deviceNum);
                    };

                    temperDiv.appendChild(deviceNameSpan);
                    temperDiv.appendChild(temperImg);
                    temperDiv.appendChild(temperSpan);

                    div.appendChild(temperDiv); //append the div tag for the temperature to the div tag for the device info.
                    deviceList.appendChild(div); //add the child node to the div tag who's id is 'devices'.
                }
            }

            function redirectToDataPage(deviceNum) {
                let currentURL = window.location.href;

                currentURL = currentURL.split('/user')[0];

                let url = `${currentURL}/data?deviceNum=${deviceNum}&user=` + document.getElementById('userID').innerText;

                window.location.href = url;
            }

            window.onload = appendDevices; //call the appendDevices function when the page is on load.
    body
        h1 application name
        h2(id='userID') #{user}
        div(class='devices', id='devices')